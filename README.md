# 声ボタン

文字を打つだけで話してくれるアプリ

## 概要

「声ボタン」は、風邪や喉の不調で声が出ない時に、スマートフォンで文字を入力すると音声で読み上げてくれるアプリです。日常会話で頻出する語句や表現をスニペットとして登録しておけば、ワンタップで即座に読み上げることができます。

## 主な機能

### ✅ MVP機能（実装済み）

1. **ワンタップ読み上げ機能**
   - 登録したスニペットをワンタップで即座に読み上げ
   - 読み上げまでの遅延は1秒以内
   - 読み上げ中は視覚的フィードバック表示（グラデーション＋アイコン）
   - 読み上げ中に再タップで即座に停止

2. **スニペット管理機能**
   - 3列グリッドレイアウトで見やすく表示
   - スクロール対応で無制限にスニペットを追加可能
   - スニペットの追加・編集・削除が可能（最大50文字）
   - ドラッグ&ドロップでスニペットの並び替え
   - デフォルトスニペット12個を用意
   - データはローカルに自動保存

3. **テキスト入力からの読み上げ**
   - 自由にテキストを入力して読み上げ可能（最大50文字）
   - 読み上げ中は停止ボタンに切り替わる

4. **読み上げ速度調整機能**
   - スライダーで速度を50%〜250%の範囲で調整可能
   - デフォルトは100%（標準速度）
   - 元のAndroid TTS速度70%を基準100%として調整
   - 設定はローカルに自動保存
   - リアルタイムで速度を変更できる

5. **音声選択機能** 🆕改善
   - TTSから取得できる最初の4つの日本語音声から選択可能
   - プルダウンメニューで「音声1」「音声2」「音声3」「音声4」と表示
   - スニペット編集画面の最上部に固定表示
   - 音声設定はローカルに自動保存
   - キーボードとの重なり問題を解決

6. **モダンなUI/UX**
   - Material Design 3準拠のデザイン
   - グラデーション背景とソフトシャドウ
   - タップ時のスケールアニメーション
   - 折りたたみ可能なコントロールパネル
   - 直感的なハンドルバー操作

7. **レスポンシブデザイン対応** 🆕
   - 小型スマホ（画面幅350px未満）でも文字が隠れない
   - 画面サイズに応じてフォントサイズとパディングを自動調整
   - コントロールパネルの各要素が画面サイズに適応
   - SafeArea対応でナビゲーションバーと重ならない
   - すべてのAndroid端末で快適に使用可能

### デフォルトスニペット
   - 「ありがとうございます」
   - 「すみません」
   - 「了解しました」
   - 「お願いします」
   - 「少々お待ちください」
   - 「大丈夫です」
   - 「風邪で声が出ません」
   - 「お会計お願いします」
   - 「袋は不要です」
   - 「温めてください」
   - 「お水ください」
   - 「ちょっと待って」

### 🚧 将来実装予定の機能

- ピッチ調整機能
- スニペットのカテゴリ分け
- クラウド同期機能
- iOS版の開発

## 技術スタック

- **フレームワーク**: Flutter 3.x
- **言語**: Dart
- **主要パッケージ**:
  - `flutter_tts`: 音声読み上げ機能
  - `shared_preferences`: ローカルデータ保存
  - `provider`: 状態管理

## 開発環境のセットアップ

### 必要なもの

- Flutter SDK 3.8.0以上
- Android Studio または VSCode
- Android SDK（Android 6.0 / API Level 23以上）

### インストール手順

1. リポジトリをクローン
```bash
git clone [repository-url]
cd voice_assistant_app
```

2. 依存パッケージをインストール
```bash
flutter pub get
```

3. Androidエミュレータを起動、または実機を接続

4. アプリを実行
```bash
flutter run
```

## ビルド方法

### デバッグビルド
```bash
flutter build apk --debug
```

### リリースビルド
```bash
flutter build apk --release
```

生成されたAPKは `build/app/outputs/flutter-apk/app-release.apk` にあります。

**リリースAPK情報：**
- **ファイルサイズ**: 22MB（23.2MB → 最適化により削減）
- **ビルド日**: 2025-10-20
- **バージョン**: 1.0.0+1
- **最適化**: フォントアイコン自動最適化済み（99.6%-99.8%削減）
- **インストール**: 実機に直接インストール可能
- **対応OS**: Android 6.0（API Level 23）以上

## 使い方

### 基本的な使い方

#### 1. **ワンタップで読み上げ**
メイン画面に表示されているスニペットボタンをタップするだけで、即座に音声で読み上げられます。

- タップ → 即座に読み上げ（1秒以内）
- 読み上げ中は青いグラデーションとアイコンで視覚的フィードバック
- 読み上げ中に再タップで即座に停止

#### 2. **読み上げ速度の調整**
画面下部のコントロールパネルで速度を調整できます。

1. 画面下部の矢印アイコン（ハンドルバー）をタップしてコントロールパネルを展開
2. 「読み上げ速度」セクションのスライダーをドラッグ
3. 50%〜250%の範囲で調整可能（デフォルト100%）
4. 設定は自動保存され、アプリ再起動後も維持される

#### 3. **音声の変更**
編集画面から音声を選択できます。

1. 画面右上の編集アイコン（✏️）をタップ
2. スニペット編集画面の最上部に「音声選択」セクションが表示される
3. プルダウンから「音声1」〜「音声4」を選択
4. 選択した音声は自動保存される

#### 4. **テキスト入力から読み上げ**
定型文以外も自由に読み上げられます。

1. コントロールパネルを展開（ハンドルバーをタップ）
2. 「テキストから読み上げ」セクションに文字を入力（最大50文字）
3. スピーカーアイコンのボタンをタップで読み上げ
4. 読み上げ中は停止ボタンに切り替わる

#### 5. **コントロールパネルの操作**
画面を有効活用できます。

- 画面下部の矢印アイコンをタップして展開/折りたたみ
- 折りたたむとより多くのスニペットが表示される
- 必要な時だけ展開して使用

### スニペットの管理

#### 追加
1. 編集画面の「+」ボタンをタップ
2. テキストを入力して「追加」をタップ（最大50文字）

#### 編集
1. 編集画面でスニペットの編集アイコンをタップ
2. テキストを変更して「保存」をタップ（最大50文字）

#### 削除
1. 編集画面でスニペットの削除アイコンをタップ
2. 確認ダイアログで「削除」をタップ

#### 並び替え
- ドラッグハンドル（≡）を長押ししてドラッグ

## プロジェクト構造

```
lib/
├── main.dart                      # アプリのエントリーポイント
├── models/
│   └── snippet.dart               # スニペットのデータモデル
├── providers/
│   ├── snippet_provider.dart      # スニペットの状態管理
│   └── tts_provider.dart          # TTS（音声読み上げ）の状態管理
├── screens/
│   ├── home_screen.dart           # メイン画面
│   └── edit_snippet_screen.dart   # スニペット編集画面
└── widgets/
    └── snippet_button.dart        # スニペットボタンWidget
```

## 開発の経緯

このアプリは、AIPM_System（PMBOK × Lean UX × Agile）の手法に従って開発されました。

### 開発プロセス

1. **立ち上げ（Initiating）**
   - プロジェクト憲章の作成
   - ステークホルダーの特定

2. **発見（Discovery）**
   - ペルソナの定義
   - 課題定義書の作成
   - ソリューションの方向性の決定

3. **計画（Planning）**
   - プロダクトバックログの作成
   - MVP機能の絞り込み
   - 技術スタックの選定

4. **実行（Executing）**
   - スプリント1：基盤構築と基本UI
   - スプリント2：コア機能実装
   - スプリント3：テストとリリース準備

## ライセンス

このプロジェクトは個人開発プロジェクトです。

## 作成者

usuba.yusuke

## 謝辞

- Flutter チームの素晴らしいフレームワークに感謝
- flutter_tts パッケージの開発者に感謝
- AIPM_System の開発手法に感謝
